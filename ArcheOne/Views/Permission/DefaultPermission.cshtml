@using ArcheOne.Database.Entities;
@{
	Layout = "_MasterLayout";
	ViewBag.datatable = "true";
	ViewBag.select2 = "true";
}
@model List<PermissionMst>
<style>
	.tag-input-container {
		position: relative;
	}

	.tag-input {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		border: 1px solid #ccc;
		border-radius: 5px;
		padding: 5px;
	}

		.tag-input input[type="text"] {
			flex-grow: 1;
			border: none;
			outline: none;
		}

	.tag-list {
		display: flex;
		flex-wrap: wrap;
	}

	.tag {
		display: flex;
		align-items: center;
		background-color: #eaeaea;
		padding: 5px;
		margin-right: 5px;
		margin-bottom: 5px;
		border-radius: 5px;
	}

	.tag-label {
		margin-right: 5px;
	}

	.tag-remove {
		cursor: pointer;
		color: #999;
		font-size: 12px;
		line-height: 1;
	}

		.tag-remove:hover {
			color: #666;
		}


	/*.tags-input {
		display: inline-block;
		position: relative;
		border: 1px solid #ccc;
		border-radius: 4px;
		padding: 5px;
		box-shadow: 2px 2px 5px #00000033;
		width: 50%;
	}

		.tags-input ul {
			list-style: none;
			padding: 0;
			margin: 0;
		}

		.tags-input li {
			display: inline-block;
			background-color: #f2f2f2;
			color: #333;
			border-radius: 20px;
			padding: 5px 10px;
			margin-right: 5px;
			margin-bottom: 5px;
		}

		.tags-input input[type="text"] {
			border: none;
			outline: none;
			padding: 5px;
			font-size: 14px;
		}

			.tags-input input[type="text"]:focus {
				outline: none;
			}

		.tags-input .delete-button {
			background-color: transparent;
			border: none;
			color: #999;
			cursor: pointer;
			margin-left: 5px;
		}*/
</style>

<!-- Content Header (Page header) -->
<section class="content-header">
	<div class="container-fluid">
		<div class="row mb-2">
			<div class="col-sm-6">
				<h1>Default Permission</h1>
			</div>
			<div class="col-sm-6">
				<ol class="breadcrumb float-sm-right">
					<li class="breadcrumb-item"><a href="#">Permission</a></li>
					<li class="breadcrumb-item active">Default Permission</li>
				</ol>
			</div>
		</div>
	</div><!-- /.container-fluid -->
</section>

<!-- Main content -->
<section class="content">
	<div class="tags-input">
		<ul id="tags"></ul>
		<input type="text" id="input-tag"
			   placeholder="Enter tag name" />
	</div>
	<div class="tag-input-container">
		<div class="tag-input">
			<input type="text" id="tag-input" placeholder="Add tags">
			<div class="tag-list" id="tag-list"></div>
		</div>
	</div>

	<!-- Default box -->
	<div class="card">
		<div class="card-header">
			<div class="row">
				<div class="col-md-3">
					<div class="form-group">
						<label>Role</label>
						<select class="form-control" id="slRoles" onchange="GetDefaultPermissions($(this).val())">
							<option selected disabled value="0">Select Role</option>
						</select>
					</div>
				</div>
			</div>
		</div>
		<div class="card-body">
			<table id="tbDefaultPermissions" class="table table-bordered table-striped" style="width:100%">
			</table>
		</div>
		<div class="card-footer">
			<button id="btnUpdatePermission" type="button" class="btn btn-warning" disabled onclick="ShowPermissionAlert();">Update Permissions</button>
		</div>
		<!-- /.card-body -->
	</div>
	<!-- /.card -->

</section>
<!-- /.content -->
@section Scripts
	{
	<script src="~/archeone/js/permission/defaultpermission.js"></script>
	<script>
		var tagInput = document.getElementById('tag-input');
		var tagList = document.getElementById('tag-list');
		var tags = [];

		tagInput.addEventListener('keydown', function (event) {
			if (event.key === 'Enter' || event.keyCode === 188) {
				event.preventDefault();
				var tagValue = this.value.trim();
				if (tagValue !== '') {
					if (!tags.includes(tagValue)) {
						tags.unshift(tagValue); // Add the new tag at the start of the array
						var tagElement = document.createElement('div');
						tagElement.classList.add('tag');
						tagElement.innerHTML = '<span class="tag-label">' + tagValue + '</span><span class="tag-remove">&#x2715;</span>';
						tagList.insertBefore(tagElement, tagList.firstChild); // Insert the tag at the beginning of the tag list
					}
					this.value = '';
				}
			}
		});

		tagList.addEventListener('click', function (event) {
			if (event.target.classList.contains('tag-remove')) {
				var tagValue = event.target.parentNode.querySelector('.tag-label').textContent;
				var tagIndex = tags.indexOf(tagValue);
				if (tagIndex !== -1) {
					tags.splice(tagIndex, 1);
					this.removeChild(event.target.parentNode);
				}
			}
		});
	</script>
	<script>

		// Get the tags and input elements from the DOM
		const tags = document.getElementById('tags');
		const input = document.getElementById('input-tag');

		// Add an event listener for keydown on the input element
		input.addEventListener('keydown', function (event) {

			// Check if the key pressed is 'Enter'
			if (event.key === 'Enter') {

				// Prevent the default action of the keypress
				// event (submitting the form)
				event.preventDefault();

				// Create a new list item element for the tag
				const tag = document.createElement('li');

				// Get the trimmed value of the input element
				const tagContent = input.value.trim();

				// If the trimmed value is not an empty string
				if (tagContent !== '') {

					// Set the text content of the tag to
					// the trimmed value
					tag.innerText = tagContent;

					// Add a delete button to the tag
					tag.innerHTML += '<button class="delete-button">X</button>';

					// Append the tag to the tags list
					tags.appendChild(tag);

					// Clear the input element's value
					input.value = '';
				}
			}
		});

		// Add an event listener for click on the tags list
		tags.addEventListener('click', function (event) {

			// If the clicked element has the class 'delete-button'
			if (event.target.classList.contains('delete-button')) {

				// Remove the parent element (the tag)
				event.target.parentNode.remove();
			}
		});
	</script>
	}